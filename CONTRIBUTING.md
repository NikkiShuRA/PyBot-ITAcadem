# Workflow & Development Standards

Как мы ведем разработку, чтобы проект жил, а мы не срались.

## 1. Методология (Process)

Мы используем **Kanban** с элементами **FDD (Feature Driven Development)**.

1. **Планирование:** Все задачи ведутся в **GitHub Projects**.
2. **WIP Limit:** Не больше **1 задачи** в статусе "In Progress" на человека.
3. **Feature Branch Workflow:**
    * `main` — священная, всегда рабочая ветка.
    * Разработка ведется в ветках `dev-Name`, `feat/name` или `fix/name`.
    * Слияние в `main` — **только через Pull Request (PR)**.

## 2. Контроль Качества (Quality Gates)

PR может быть влит только при соблюдении условий:

1. ✅ **GitHub Actions:** Все тесты прошли, линтер (`ruff`) не ругается.
2. ✅ **Pre-commit hooks:** Локальные проверки пройдены.
3. ✅ **Code Review:** Предполагается, при крупных архитектурных изменениях или введённых функциональностях.
4. ✅ **Type Hints:** Полное покрытие типизацией.

## 3. Тестирование (TDD-lite)

Мы придерживаемся цикла **Red -> Green -> Refactor**.

1. **Unit Tests (Обязательно):** Любая бизнес-логика (методы моделей, сервисов) должна быть покрыта тестами.
2. **Coverage:** Стремимся к 50%+.
3. **Bot Testing:** Тестирование хендлеров `aiogram` опционально, упор делаем на логику ядра.

## 4. Git Culture

### Conventional Commits (Russian)

Используем формат: `<тип>: <описание>`

* `feat`: новая функциональность
* `fix`: исправление ошибки
* `docs`: изменения в документации
* `refactor`: правка кода без изменения логики
* `test`: добавление тестов
* `chore`: настройка сборки, линтеров, CI
* `perf`: оптимизация

**Примеры:**

* `feat: добавил начисление баллов за посещение`
* `fix: исправил ошибку миграции alembic`

### SemVer

Версионирование проекта следует принципам Semantic Versioning (Major.Minor.Patch).

## 5. Документация

* Используем **Sphinx** для генерации документации.
* При создании PR используйте шаблон (PR Template).
* Для важных архитектурных решений создаем **ADR** (Architecture Decision Record).
